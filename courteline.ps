%!PS

(commun) run

% pièces

/salle-de-bain {
  gsave
    show-grille {
       -5    0 moveto
        0  203 rlineto
      310    0 rlineto
        0 -203 rlineto
      clip newpath
      0 0 moveto grille
      cliprestore
    } if

    mur-porteur
    -5 185 9 add moveto mark 5 90 5 210 5 sum 0 rlineto stroke

    cloison
    -2.5 0 moveto 0 185 rlineto
    0 150 2.5 add  moveto 90 0 rlineto
    90 2.5 sub 150 moveto 0 35 rlineto
    mark 85 5 210 2.5 sum 0 moveto 0 185 rlineto

    -5 -2.5 moveto mark 10 5 90 5 45 sum 0 rlineto
    80 0 rmoveto 85 0 rlineto

    stroke


  grestore
} def

/salle-de-bain+wc {
  gsave
    show-grille {
       -5    0 moveto
        0  203 rlineto
      320    0 rlineto
        0 -203 rlineto
      clip newpath
      0 0 moveto grille
      cliprestore
    } if

    -2.5 0 moveto
    cloison 0 185 rlineto
    currentpoint stroke moveto
    -5.5 9 rmoveto
    mur-porteur 331 0 rlineto stroke

    90 2.5 add 0 moveto
    cloison 0 185 rlineto

    315 185 moveto
    -2.5 0 rmoveto
    0 -185 rlineto
    stroke

    1 setlinewidth
    -5 0 moveto
    320 0 rlineto stroke

  grestore
} def

/cuisine {
  gsave
     -5    0 moveto
      0  280 rlineto
    515    0 rlineto
      0 -280 rlineto
    clip newpath
    0 0 moveto show-grille { grille } if
    cliprestore

    -5 0 moveto
    cloison-double 0 280 rlineto currentpoint stroke
    mur-porteur
    -13 289 moveto 345 0 rlineto
    150 0 rmoveto
    30 0 rlineto
    30 -280 -18 add rmoveto
    -367 0 rlineto stroke

    cloison-double 502 5 add 0 moveto
    0 270 rlineto stroke
    cloison 502 10 add 270 2.5 add moveto
    -23 0 rlineto

    stroke
  grestore
} def

/terrasse {
  gsave
    show-grille {
        0   0  moveto
        0  280 rlineto
     1220    0 rlineto
        0 -280 rlineto
      clip newpath
      grille
      cliprestore
    } if
    gsave -20 8 translate bac-a-fleurs grestore
    gsave -20 -26 -264 add translate bac-a-fleurs grestore
    mark 70 95 128 310 450 95 70 -30 sum dup
    gsave 8 translate bac-a-fleurs grestore
    gsave -26 -264 add translate bac-a-fleurs grestore
    mur-porteur
    0 -9  moveto 70 0 rlineto 95 0 rmoveto 128 0 rlineto 310 0 rmoveto
                450 0 rlineto 95 0 rmoveto  70 0 rlineto stroke
    0 289 moveto 1218 0 rlineto stroke
  grestore
} def

/chambre-1 {
  gsave
    show-grille {
        0   0  moveto
        0  280 rlineto
      430    0 rlineto
        0 -280 rlineto
       85    0 rlineto
        0  130 rlineto
       -85   0 rlineto
        0 -130 rlineto
      clip newpath
      grille
      cliprestore
    } if
    mur-porteur
    -28 -9  moveto  58 0 rlineto 90 0 rmoveto 385 18 add 0 rlineto
    -28 289 moveto 488 0 rlineto
    mark 30 90 385 9 sum dup 0 moveto 0 130 rlineto
    9 sub 121 moveto -65 0 rlineto
    stroke
    cloison-double
    -5 0 moveto 0 270 rlineto
    cloison
    mark 30 90 385 -7.5 sum 0 moveto
    0 130 18 sub 7.5 sub rlineto -65 -2.5 add 0 rlineto
    2.5 2.5 rmoveto 0 18 rlineto
    stroke
  grestore
} def

/chambre-4 {
  gsave
    show-grille {
        0   0  moveto
        0  280 rlineto
      538    0 rlineto
        0 -280 rlineto
      clip newpath
      grille
      cliprestore
    } if
    mur-porteur
    -50 -9 moveto 405 0 rlineto 90 0 rmoveto 113 0 rlineto
    -19 140 moveto 0 140 rlineto
    -28 289 moveto 388 0 rlineto 83 0 rmoveto 113 0 rlineto
    stroke
    cloison
    -2.5 145 moveto 0 130 rlineto
     0 272.5 moveto 355 0 rlineto 93 0 rmoveto 88 0 rlineto
    536 2.5 add 0 moveto 0 280 rlineto
    stroke
  grestore
} def

/chambre-5 {
  gsave
    show-grille {
        0   0  moveto
        0  280 rlineto
      550    0 rlineto
        0 -280 rlineto
      clip newpath
      grille
      cliprestore
    } if
    gsave -20 8 translate bac-a-fleurs grestore
    mur-porteur
    0 -9  moveto 575 0 rlineto
    0 289 moveto 555 0 rlineto stroke
    200 0 translate
    cloison-double
    -5 80 moveto 0 200 rlineto stroke
    cloison
    347 2.5 add 80 moveto 0 200 rlineto stroke
  grestore
} def

% document

/show-grille false def

(Plan d'ensemble) titre
1 cm 100 1 div div dup echelle

gsave
  marge dup translate
  dup scale
  0 20 translate
  90 rotate
  0 298 4 mul neg translate
  gsave 172 338 add
      298 3 mul translate terrasse         grestore
  gsave mark 172 18 10 468 3 65 5 65 3 383 10 502 10 sum
            298 translate chambre-1        grestore
  gsave 200 298 translate chambre-4        grestore
  gsave   0   0 translate chambre-5        grestore
  gsave 673  95 translate salle-de-bain+wc grestore
  gsave mark 172 18 10 468 3 65 5 65 3 383 10 sum
            298 translate cuisine          grestore
  gsave mark 172 18 10 347 5 96 5 90 5 210 5 65 3 258 5 134 5 sum
             95 translate salle-de-bain    grestore
grestore

/show-grille true def

showpage

(Cuisine) titre
1 cm 100 4.5 div div dup echelle

gsave
  marge dup translate
  90 rotate
  dup scale
  13 -280 -18 add translate
  cuisine
grestore

showpage

(Salle de bain) titre
1 cm 100 7 div div dup echelle

gsave
  marge dup translate
  90 rotate
  dup scale
  5 -203 translate
  salle-de-bain
grestore

showpage

(Salle de bain + WC) titre
1 cm 100 7 div div dup echelle

gsave
  marge dup translate
  90 rotate
  dup scale
  8 -203 translate
  salle-de-bain+wc
grestore

showpage

(Salles de bain) titre
1 cm 100 5 div div dup echelle

gsave
  marge dup translate
  dup scale
  8 0 translate
  salle-de-bain+wc
  0 250 translate
  salle-de-bain
grestore

showpage

(Chambre 1) titre
1 cm 100 4 div div dup echelle
gsave
  marge dup translate
  dup scale
  90 rotate
  28 -298 translate
  chambre-1
grestore

showpage

(Chambre 4) titre
1 cm 100 4 div div dup echelle
gsave
  marge dup translate
  dup scale
  -90 rotate
  -556 18 translate
  chambre-4
grestore

showpage

(Chambre 5) titre
1 cm 100 4 div div dup echelle
gsave
  marge dup translate
  dup scale
  -90 rotate
  -575 18 translate
  chambre-5
grestore

showpage
