%!PS

(commun) run

% pièces

/salle-de-bain {
  gsave
    show-grille {
       -5    0 moveto
        0  203 rlineto
      310    0 rlineto
        0 -203 rlineto
      clip newpath
      0 0 moveto grille
      cliprestore
    } if

    mur-porteur
    -5 185 9 add moveto mark 5 90 5 210 5 sum 0 rlineto stroke

    cloison
    -2.5 0 moveto 0 185 rlineto
    0 150 2.5 add  moveto 90 0 rlineto
    90 2.5 sub 150 moveto 0 35 rlineto
    mark 85 5 210 2.5 sum 0 moveto 0 185 rlineto
    2.5 -185 -2.5 add rmoveto -5 -80 add 0 rlineto
    -80 0 rmoveto mark 50 5 85 5 sum neg 0 rlineto
    stroke
    gsave
      mark 85 5 210 -80 -5 sum 0 translate 90 rotate 70 porte-droite
    grestore

  grestore
} def

/salle-de-bain+wc {
  gsave
    show-grille {
        0    0 moveto
        0  185 rlineto
        mark 90 5 210 sum dup 0 rlineto
        0 exch neg rlineto
      clip newpath
      0 0 moveto grille
      cliprestore
    } if

    mur-porteur
    -8 185 9 add moveto 331 0 rlineto
    stroke

    cloison
    -2.5 -5 moveto             0 190 rlineto
    90 2.5 add 0 moveto        0 185 rlineto
    95 160 2.5 add moveto 138 0 rlineto 0 25 rlineto
    mark 90 5 210 2.5 sum 0 moveto 0 185 rlineto
    80 -2.5 moveto 30 0 rlineto 80 0 rmoveto 120 0 rlineto
    stroke

    gsave
      mark 90 5 15 5 sum 0 translate -90 rotate 70 porte-gauche
    grestore
    gsave
      80 -5 add 0 translate 90 rotate 70 porte-droite
    grestore

  grestore
} def

/cuisine {
  gsave
     -5    0 moveto
      0  280 rlineto
    515    0 rlineto
      0 -280 rlineto
    clip newpath
    0 0 moveto show-grille { grille } if
    cliprestore

    -5 0 moveto
    cloison-double 0 280 rlineto currentpoint stroke
    mur-porteur
    -13 289 moveto 345 0 rlineto
    150 0 rmoveto 30 0 rlineto
    30 -280 -18 add rmoveto
    -367 0 rlineto stroke

    cloison-double 502 5 add 0 moveto
    0 270 rlineto stroke
    cloison 502 10 add 270 2.5 add moveto
    -23 0 rlineto
    90 -2.5 moveto 90 0 rlineto stroke
    stroke
    vitre
    mark -13 345 -10 sum 275 moveto 70 0 rlineto
    stroke
    gsave
      5 0 translate -90 rotate 80 porte-gauche
    grestore
    gsave
      mark -13 345 150 -5 sum 280 translate 90 rotate 80 porte-gauche
    grestore
  grestore
} def

/cellier {
  gsave
    show-grille {
        0   0  moveto
        0  200 rlineto
      135    0 rlineto
        0 -200 rlineto
      clip newpath
      grille
      cliprestore
    } if
    cloison
    -2.5 -2.5 moveto 0 90  rlineto
    currentpoint 5 add gsave translate 70 porte-gauche grestore
    0 80 rmoveto
    0 35 rlineto
    -5 -2.5 moveto 134 10 add 0 rlineto
    134 2.5 add  -5 moveto 0 190 rlineto
    mark 80 3 2.5 sum 185 moveto 0 -60 rlineto
    134 2.5 add 125 2.5 add moveto -51 0 rlineto
    0 mark 185 18 -2.5 sum moveto 134 0 rlineto
    stroke
    mur-porteur
    80 185 9 add moveto 60 0 rlineto
    stroke
  grestore
} def

/terrasse {
  gsave
    show-grille {
        0   0  moveto
        0  280 rlineto
     1220    0 rlineto
        0 -280 rlineto
      clip newpath
      grille
      cliprestore
      gsave
          0 -320 translate
          0   22 moveto
          0  298 rlineto
        190    0 rlineto
          0 -298 rlineto
        clip newpath
        grille
        cliprestore
       1020    4  moveto
          0  320 rlineto
        200    0 rlineto
          0 -320 rlineto
        clip newpath
        grille
        cliprestore
      grestore
    } if
    gsave -20 8 translate bac-a-fleurs grestore
    gsave -20 -26 -264 add translate bac-a-fleurs grestore
    gsave
      mark 70 95 128 310 450 95 70 -30 sum dup
      8 translate bac-a-fleurs
    grestore
    gsave -26 -264 add translate bac-a-fleurs grestore
    mur-porteur
    0 -9  moveto 70 0 rlineto 95 0 rmoveto 128 0 rlineto 310 0 rmoveto
                450 0 rlineto 95 0 rmoveto  70 0 rlineto stroke
    0 289 moveto 1218 0 rlineto stroke
  grestore
} def

/sejour {
  gsave
    show-grille {
        0   0  moveto
        0  298 rlineto
      -28    0 rlineto
        0  280 rlineto
      818    0 rlineto
        0 -280 rlineto
      -340   0 rlineto
        0 -578 rlineto
      clip newpath
      gsave -35 -0 translate grille grestore
      cliprestore
    } if
    mur-porteur
    mark 65 383 -3 sum 289 moveto 345 0 rlineto
    65 3 add 289 moveto -128 -3 add 0 rlineto 
    -63 mark 280 18 280 9 sum moveto 128 0 rlineto 310 0 rmoveto 450 0 rlineto
    stroke
    vitre
    -63 128 add mark 280 18 280 -5 sum moveto 310 0 rlineto
    -28 -5 add 298 moveto 0 280 rlineto
    mark -28 818 5 sum 280 moveto 0 298 rlineto
    stroke
    cloison
    
    -2.5  0  moveto 0 280 rlineto
    65 -185 rmoveto 0 -95 rlineto 
     0 92.5 rmoveto -65 0 rlineto
    stroke
    cloison-double
    mark 65 383 5 sum 0 moveto 0 280 rlineto
    stroke
  grestore
} def

/chambre-1 {
  gsave
    show-grille {
        0   0  moveto
        0  280 rlineto
      430    0 rlineto
        0 -280 rlineto
       85    0 rlineto
        0  130 rlineto
       -85   0 rlineto
        0 -130 rlineto
      clip newpath
      grille
      cliprestore
    } if
    mur-porteur
    -28 -9  moveto  58 0 rlineto 90 0 rmoveto 385 18 add 0 rlineto
    -28 289 moveto 488 0 rlineto
    mark 30 90 385 9 sum dup 0 moveto 0 130 rlineto
    9 sub 121 moveto -65 0 rlineto
    stroke
    cloison-double
    -5 0 moveto 0 270 rlineto
    stroke
    vitre
    mark 430 5 add 280 moveto 0 -155 rlineto
    stroke
    cloison
    mark 30 90 385 -7.5 sum 0 moveto
    0 130 18 sub 7.5 sub rlineto -65 -2.5 add 0 rlineto
    2.5 2.5 rmoveto 0 18 rlineto
    -23 270 2.5 add moveto 430 23 add 0 rlineto
    stroke
    gsave
     30 5 add 0 translate 80 porte-droite
    grestore
  grestore
} def

/chambre-2 {
  gsave
    show-grille {
        0   0  moveto
        0  270 rlineto
      367    0 rlineto
        0 -270 rlineto
      clip newpath
      grille
      cliprestore
    } if
    mur-porteur
    -10 -19 moveto 367 10 add 10 add 18 add 0 rlineto
    -8 270 9 add moveto 385 18 add 0 rlineto
    367 10 add 9 add 270 moveto 0 -140 rlineto
    stroke
    vitre
    mark -8 385 -5 sum -10 moveto 0 145 rlineto
    stroke
    cloison
    -2.5 -10 moveto 0 10 rlineto
    -2.5 90 moveto 0 180 rlineto
    367 2.5 add 270 moveto 0 -135 rlineto
    0 -2.5 moveto 367 0 rlineto
    stroke
    gsave
      0 5 translate 80 porte-droite
    grestore
  grestore
} def

/chambre-3 {
  gsave
    show-grille {
        0   0  moveto
        0  280 rlineto
     mark 153 5 65 348 10 373 sum 0 rlineto
        0 -270 rlineto
      clip newpath
      grille
      cliprestore
    } if
    mur-porteur
    -18 -12 add -9 moveto
    mark 12 18 153 5 65 348 10 373 sum 0 rlineto
    -9 0 moveto 0 280 rlineto
    -18 -12 add 289 moveto 155 0 rlineto
    90 0 rmoveto 739 0 rlineto
    stroke
    vitre
    mark 117 5 96 5 348 sum 0 moveto 0 190 rlineto
    stroke
    cloison
    mark 117 5 96 2.5 sum 280 moveto 0 -40 rlineto
    -2.5 2.5 rmoveto 90 0 rlineto
    -2.5 -2.5 rmoveto 0 40 rlineto
    stroke
    gsave
    mark 117 8 5 sum 280 translate -90 rotate 80 porte-droite
    grestore
    gsave
    mark 117 5 96 5 348 -5 sum 280 5 sub translate 180 rotate 80 porte-droite
    grestore
  grestore
} def

/chambre-4 {
  gsave
    show-grille {
        0   0  moveto
        0  280 rlineto
      538    0 rlineto
        0 -280 rlineto
      clip newpath
      grille
      cliprestore
    } if
    mur-porteur
    -50 -9 moveto 405 0 rlineto 90 0 rmoveto 113 0 rlineto
    -19 140 moveto 0 140 rlineto
    -28 289 moveto 388 0 rlineto 83 0 rmoveto 113 0 rlineto
    stroke
    vitre
    -5 0 moveto 0 140 rlineto
    stroke
    cloison
    -2.5 145 moveto 0 130 rlineto
     0 272.5 moveto 355 0 rlineto 93 0 rmoveto 88 0 rlineto
    mark 468 65 2.5 sum 0 moveto 0 280 rlineto
    stroke
    gsave
      355 90 add 5 sub 0 translate 90 rotate 80 porte-droite
    grestore
    gsave
      355 90 add 5 1.5 sub sub 280 translate 90 rotate 80 porte-gauche
    grestore
  grestore
} def

/chambre-5 {
  gsave
    show-grille {
        0   0  moveto
        0  280 rlineto
      550    0 rlineto
        0 -280 rlineto
      clip newpath
      grille
      cliprestore
    } if
    gsave -20 8 translate bac-a-fleurs grestore
    mur-porteur
    0 -9  moveto 575 0 rlineto
    0 289 moveto 555 0 rlineto stroke
    200 0 translate
    vitre
    -5 90 moveto 0 190 rlineto stroke
    cloison
    347 2.5 add 90 moveto 0 190 rlineto stroke
  grestore
  gsave
    mark 172 18 10 347 sum 5 translate
    newpath 0 0 moveto 80 porte-gauche
  grestore
  gsave
    mark 172 18 10 sum 5 translate
    newpath 0 0 moveto 80 porte-droite
  grestore
} def

/cave {
  gsave
    show-grille {
        0   0  moveto
        0  280 rlineto
      190    0 rlineto
        0 -280 rlineto
      clip newpath
      grille
      cliprestore
    } if
    mur-porteur
    -9 0 moveto 0 289 rlineto
    190 18 add 0 rlineto
    0 -280 -18 add rlineto
    -99 -9 add 0 rlineto
    -85 0 rmoveto -6 -18 add 0 rlineto
    stroke
  grestore
  gsave
    6 2.5 add -9 translate
    -90 rotate
    newpath 0 0 moveto 80 porte-gauche
  grestore
} def

% document

%%Page: 1 1

/show-grille false def

(Plan d'ensemble) titre
1 cm 100 1 div div dup echelle

gsave
  marge dup translate
  dup scale
  0 20 translate
  90 rotate
  0 298 4 mul neg translate
  gsave 172 338 add
      298 3 mul translate terrasse         grestore
  gsave mark 200 468 65 5 sum
            298 translate sejour           grestore
  gsave mark 172 18 10 468 65 5 65 383 10 502 10 sum
            298 translate chambre-1        grestore
  gsave mark 30 160 10 347 5 96 5 90 5 210 5 65 258 5 134 5 85 5 210 5 96 5 sum
             10 translate chambre-2        grestore
  gsave mark 1154 93 12 18 sum
            -280 -18 add translate chambre-3        grestore
  gsave 200 298 translate chambre-4        grestore
  gsave   0   0 translate chambre-5        grestore
  gsave 673  95 translate salle-de-bain+wc grestore
  gsave mark 172 18 10 468 65 5 65 383 10 sum
            298 translate cuisine          grestore
  gsave mark 172 18 10 468 65 5 65 383 10 90 5 sum
       90 5 add translate cellier          grestore
  gsave mark 172 18 10 347 5 96 5 90 5 210 5 65 258 5 134 5 sum
             95 translate salle-de-bain    grestore
grestore

/show-grille true def

showpage

%%Page: 2 2
(Cuisine + cellier) titre
1 cm 100 3.5 div div dup echelle

gsave
  marge dup translate
  90 rotate
  dup scale
  gsave
    13 -280 -18 add translate
    cuisine
  grestore
  90 13 5 add add -298 -185 -18 add add  translate
  cellier
grestore

showpage

%%Page: 3 3
(Salles de bain) titre
1 cm 100 5 div div dup echelle

gsave
  marge dup translate
  dup scale
  8 5 translate
  salle-de-bain+wc
  0 250 translate
  salle-de-bain
grestore

showpage

%%Page: 4 4
1 cm 100 3 div div dup echelle
gsave
  marge dup translate
  dup scale
-18 0 translate
  90 rotate
  58 -596 translate
  sejour
grestore
(Séjour) titre

showpage

%%Page: 5 5
(Chambre 1) titre
1 cm 100 4 div div dup echelle
gsave
  marge dup translate
  dup scale
  90 rotate
  28 -298 translate
  chambre-1
grestore

showpage

%%Page: 6 6
(Chambre 2) titre
1 cm 100 4 div div dup echelle
gsave
  marge dup translate
  dup scale
  90 rotate
  10 -288 translate
  chambre-2
grestore

showpage

%%Page: 7 7
(Chambre 3) titre
1 cm 100 4 div div dup echelle
gsave
        0   0  moveto
        0  730 rlineto
      400    0 rlineto
        0 -750 rlineto
      clip newpath
  marge dup translate
  dup scale
  298 18 translate
  90 rotate
  chambre-3
grestore

showpage

%%Page: 8 8
(Chambre 4) titre
1 cm 100 4 div div dup echelle
gsave
  marge dup translate
  dup scale
  -90 rotate
  -556 18 translate
  chambre-4
grestore

showpage

%%Page: 9 9
(Chambre 5) titre
1 cm 100 4 div div dup echelle
gsave
  marge dup translate
  dup scale
  -90 rotate
  -575 18 translate
  chambre-5
grestore

showpage

%%Page: 10 10
(Cave) titre
1 cm 100 6 div div dup echelle
gsave
  marge dup translate
  dup scale
  18 18 translate
  cave
grestore

showpage
